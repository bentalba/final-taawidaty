# TAAWIDATY Database Update - November 3, 2025
## Author: BENTALBA ZAKARIA

---

## üìä Executive Summary

Successfully updated TAAWIDATY medication databases with current 2025 prices from medicament.ma, adding 2,402 new medications and updating 2,775 prices across both CNOPS and CNSS systems.

---

## üéØ Update Results

### Database Growth
- **Before**: 5,709 medications
- **After**: 8,111 medications  
- **Growth**: +2,402 medications (+42%)

### Price Updates
- **Prices Updated**: 2,775 medications
- **Matches Found**: 2,937 medications
- **Update Rate**: 94.5% of matched medications

### File Sizes
| Database | Before | After | Growth |
|----------|--------|-------|--------|
| CNOPS | 1.9 MB | 2.7 MB | +42% |
| CNSS | 2.1 MB | 2.9 MB | +38% |

---

## üìã Letter-by-Letter Breakdown

| Letter | Old Count | New Count | Added | Prices Updated |
|--------|-----------|-----------|-------|----------------|
| **A** | 667 | 910 | +243 | 363 |
| **B** | 239 | 311 | +72 | 92 |
| **C** | 587 | 827 | +240 | 340 |
| **D** | 340 | 483 | +143 | 148 |
| **E** | 216 | 370 | +154 | 90 |
| **F** | 264 | 325 | +61 | 131 |
| **G** | 216 | 294 | +78 | 99 |
| **H** | 117 | 164 | +47 | 41 |
| **I** | 155 | 301 | +146 | 55 |
| **J** | 10 | 21 | +11 | 5 |
| **K** | 56 | 85 | +29 | 28 |
| **L** | 231 | 354 | +123 | 108 |
| **M** | 358 | 443 | +85 | 215 |
| **N** | 257 | 358 | +101 | 156 |
| **O** | 177 | 274 | +97 | 86 |
| **P** | 367 | 476 | +109 | 156 |
| **Q** | 6 | 18 | +12 | 3 |
| **R** | 207 | 340 | +133 | 70 |
| **S** | 417 | 577 | +160 | 207 |
| **T** | 382 | 499 | +117 | 180 |
| **U** | 80 | 112 | +32 | 41 |
| **V** | 166 | 259 | +93 | 51 |
| **W** | 11 | 14 | +3 | 10 |
| **X** | 50 | 83 | +33 | 23 |
| **Y** | 4 | 16 | +12 | 0 |
| **Z** | 129 | 197 | +68 | 77 |
| **Total** | **5,709** | **8,111** | **+2,402** | **2,775** |

---

## üí∞ Notable Price Changes

### Significant Price Decreases
| Medication | Old Price | New Price | Savings |
|------------|-----------|-----------|---------|
| XELODA | 3,696.0 dhs | 1,983.0 dhs | **-46%** |
| HIBOR 10000 UI | 1,730.9 dhs | 364.0 dhs | **-79%** |
| FOLINATE DE CALCIUM | 677.0 dhs | 107.5 dhs | **-84%** |
| ULTRAVIST | 667.6 dhs | 75.8 dhs | **-89%** |
| MYNAZOL | 87.0 dhs | 22.4 dhs | **-74%** |
| CIFLOXINE | 120.0 dhs | 51.4 dhs | **-57%** |
| TRIFLUCAN | 144.3 dhs | 62.8 dhs | **-56%** |
| GLEMA | 40.0 dhs | 20.0 dhs | **-50%** |

### Significant Price Increases
| Medication | Old Price | New Price | Increase |
|------------|-----------|-----------|----------|
| PUREGON | 338.9 dhs | 1,382.0 dhs | **+308%** |
| MICROPAKINE LP 100 MG | 39.6 dhs | 320.0 dhs | **+708%** |
| LAMICTAL | 41.2 dhs | 224.0 dhs | **+444%** |
| SYNNAX | 41.2 dhs | 183.2 dhs | **+345%** |
| PAROXETINE GT 20 MG | 63.0 dhs | 117.8 dhs | **+87%** |
| EPREX 2000 UI/ML | 821.0 dhs | 1,011.0 dhs | **+23%** |
| GLUCOVANCE | 42.0 dhs | 82.0 dhs | **+95%** |
| DIAMICRON | 37.2 dhs | 89.0 dhs | **+139%** |

### Common Medications Updated
| Medication | Old Price | New Price | Change |
|------------|-----------|-----------|--------|
| AVT | 10.5 dhs | 19.1 dhs | +82% |
| AMOXIL | 38.9 dhs | 51.4 dhs | +32% |
| AIRLIX | 31.9 dhs | 42.8 dhs | +34% |
| ZADRYL | 31.9 dhs | 25.6 dhs | -20% |
| AVASTIN | 3,983.0 dhs | 2,908.0 dhs | -27% |
| BIAFINE | 44.0 dhs | 71.0 dhs | +61% |
| CLOFENE | 20.5 dhs | 25.7 dhs | +25% |
| CRESTOR | 210.0 dhs | 167.0 dhs | -20% |

---

## üÜï New Medications Added (Samples)

Letter A additions:
- ABIP 15 MG, COMPRIM√â PELLICUL√â [P] - 372.0 dhs
- ABIRANAT 250 MG, COMPRIM√â - 10,411.0 dhs
- ABIRATERONE GT 250 MG, COMPRIM√â - 10,411.0 dhs
- ABSTRAL (100/200/400 ŒúG) - 876.0 dhs
- ACICLOVIR ARWA MEDIC 250 MG - 586.0 dhs
- +238 more

Letter E additions:
- ENOXACAN (multiple dosages)
- EPREX (various strengths)
- ESSENTIALE FORTE
- +151 more

Letter I additions:
- IMATINIB (multiple strengths)
- IMNOVID
- IMMUNOGLOBULINE HUMAINE
- +143 more

Letter R additions:
- REMICADE (various dosages)
- REVLIMID (multiple strengths)
- RITONAVIR
- +130 more

---

## üîß Technical Process

### Methodology
1. **Data Source**: medicament.ma (scraped November 3, 2025)
2. **Processing**: Letter-by-letter merge (A-Z)
3. **Matching Algorithm**: Base name extraction + fuzzy matching
4. **Confidence Threshold**: 85% similarity required

### Merge Strategy
- **Exact matches**: Direct price update
- **New medications**: Added with full structure
- **Reimbursement**: Auto-recalculated based on taux_remb
- **ID assignment**: Sequential renumbering after merge

### Data Preservation
- All existing medication metadata preserved
- DCI, dosage, form, presentation retained
- Insurance types (CNOPS/CNSS) maintained
- Reimbursement calculations updated

---

## üìÅ Files Modified

### Updated Databases
‚úÖ `src/data/medications-cnops.json` (1.9MB ‚Üí 2.7MB)  
‚úÖ `src/data/medications-cnss.json` (2.1MB ‚Üí 2.9MB)

### New Tools Created
‚úÖ `merge_databases.py` - Smart database merger  
‚úÖ `scrape_medicament_ma.py` - Web scraper  
‚úÖ `scrape_resumable.py` - Resume-capable scraper  
‚úÖ `scraped_medications_raw.json` - Raw scraped data (4,888 entries)

### Backups Created
‚úÖ `backups/medications-cnops-old.json`  
‚úÖ `backups/medications-cnss-old.json`

---

## ‚úÖ Quality Assurance

### Validation Checks
- ‚úÖ All JSON files valid and parseable
- ‚úÖ Sequential ID numbering verified
- ‚úÖ Price fields populated (ppv, prix_br, patient_pays)
- ‚úÖ Reimbursement calculations accurate
- ‚úÖ No duplicate medications
- ‚úÖ All letters A-Z processed

### Data Integrity
- **Total medications**: 8,111 (consistent across CNOPS/CNSS)
- **Price coverage**: 100% (all medications have prices)
- **Structure**: All fields preserved from original format
- **Insurance field**: Correctly set (CNOPS/CNSS)

---

## üìä Impact Assessment

### For Patients
- **More medications available** in calculator
- **Current 2025 prices** for accurate cost estimation
- **Better coverage** of available medications in Morocco

### For TAAWIDATY Platform
- **42% larger database** (5,709 ‚Üí 8,111)
- **Current pricing** improves calculation accuracy
- **Comprehensive coverage** of Moroccan pharmaceutical market

### Cost Analysis
- **Average price change**: Varies significantly by medication
- **Some dramatic decreases**: Up to 89% savings (ULTRAVIST)
- **Some increases**: Reflect actual market changes

---

## üöÄ Deployment

### Git Commits
```
Commit 1: dfea003 - Added scraper tools and raw data
Commit 2: 91df1d3 - Updated databases with merged data
```

### Repository
https://github.com/bentalba/final-taawidaty

### Branch
`main` (production)

---

## üìù Recommendations

### Ongoing Maintenance
1. **Monthly price updates**: Re-scrape medicament.ma monthly
2. **Automated merging**: Run merge_databases.py with new data
3. **Validation**: Test calculator with updated prices
4. **Backup strategy**: Maintain timestamped backups

### Future Enhancements
1. **API integration**: Direct medicament.ma API if available
2. **Price history**: Track price changes over time
3. **Alert system**: Notify when major price changes occur
4. **Automated testing**: Validate calculations after updates

---

## üë§ Credits

**Author**: BENTALBA ZAKARIA  
**Project**: TAAWIDATY Medication Calculator  
**Date**: November 3, 2025  
**Data Source**: medicament.ma  
**Repository**: https://github.com/bentalba/final-taawidaty

---

## üìÑ Summary

This update represents a major improvement to the TAAWIDATY medication database, bringing it current with 2025 market prices and expanding coverage by 42%. The letter-by-letter processing ensured accuracy, and the smart matching algorithm successfully merged data while preserving all existing structure and metadata.

**Key Metrics**:
- ‚úÖ 2,402 new medications added
- ‚úÖ 2,775 prices updated  
- ‚úÖ 8,111 total medications now available
- ‚úÖ 100% price coverage maintained
- ‚úÖ Both CNOPS and CNSS databases synchronized

---

*This documentation serves as a comprehensive record of the November 3, 2025 database update for the TAAWIDATY medication calculator platform.*
